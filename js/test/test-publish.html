<!DOCTYPE HTML>
<head>
    <meta charset="utf-8">
    <title>NDN publishing test</title>
	
    <script src="../build/ndn.js"></script>

    <script>

function testPublish () {
    var onInterest = function (interest) {
        console.log('Interest received in callback.');
        
        var co = new ContentObject(interest.name, 'NDN.JS needs refactoring.\n');
        co.sign(mykey);
        
        try {
            ndn.send(co);
        } catch (e) {
            console.log(e.toString());
        }
    };

    var ndn = new NDN();
    var mykey = ndn.getDefaultKey();

    ndn.onopen = function () {
        var n = new Name('/wentao.shang/regtest001');
        ndn.registerPrefix(n, onInterest);
        console.log('Prefix registered.');
    };

    
    ndn.connect();
    
    console.log('Started...');
}

    </script>

</head>

<body onload="testPublish()">
    
    <div id="result" style="font-family: Monaco">
    	Check JavaScript console now.
    </div>

</body>
</html>
